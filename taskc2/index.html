<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>高级前端工程师面试题</title>
</head>
<body>
	<div>
		<h3>h5地理定位如何使用？</h3>
		<div>
			<ul>
				<li>检测是否支持地理定位</li>
				<li>如果支持，则运行 getCurrentPosition() 方法。如果不支持，则向用户显示一段消息</li>
				<li>如果getCurrentPosition()运行成功，则向参数showPosition中规定的函数返回一个coordinates对象</li>
				<li>showPosition() 函数获得并显示经度和纬度</li>
				<p>getCurrentPosition() 方法的第二个参数用于处理错误。向参数中返回一个对象，可处理三种错误：</p>
				<ul>
					<li>Permission denied - 用户不允许地理定位</li>
					<li>Position unavailable - 无法获取当前位置</li>
					<li>Timeout - 操作超时</li>
				</ul>
			</ul>
		</div>
	</div>
	<div>
		<h3>Javascript的同源策略和JSONP实现跨域请求的原理</h3>
		<div>
			<p>同源策略：一段脚本只能读取来自于同一来源的窗口和文档的属性，这里的同一来源指的是主机名、协议和端口号的组合</p>
			<ul>
				<li>首先在客户端注册一个callback, 然后把callback的名字传给服务器。</li>
				<li>此时，服务器先生成 json 数据。然后以 javascript 语法的方式，生成一个function , function 名字就是传递上来的参数 jsonp。</li>	
				<li>最后将 json 数据直接以参数的方式，放置到 function 中，这样就生成了一段 js 语法的文档，返回给客户端。</li>	
				<li>客户端浏览器，解析script标签，并执行返回的 javascript 文档，此时数据作为参数，传入到了客户端预先定义好的 callback 函数里。（动态执行回调函数）</li>	
			</ul>
		</div>
	</div>
	<div>
		<h3>HTTP请求通信的流程</h3>
		<dl>
			<dt>1.建立TCP连接</dt>
			<dd>在HTTP工作开始之前，Web浏览器首先要通过网络与Web服务器建立连接，该连接是通过TCP来完成的，该协议与IP协议共同构建Internet，即著名的TCP/IP协议族，因此Internet又被称作是TCP/IP网络。HTTP是比TCP更高层次的应用层协议，根据规则，只有低层协议建立之后才能，才能进行更层协议的连接，因此，首先要建立TCP连接，一般TCP连接的端口号是80</dd>
			<dt>2.Web浏览器向Web服务器发送请求命令</dt>
			<dd>一旦建立了TCP连接，Web浏览器就会向Web服务器发送请求命令。例如：GET/sample/hello.jsp HTTP/1.1</dd>
			<dt>3.Web浏览器发送请求头信息</dt>
			<dd>浏览器发送其请求命令之后，还要以头信息的形式向Web服务器发送一些别的信息，之后浏览器发送了一空白行来通知服务器，它已经结束了该头信息的发送。</dd>
			<dt>4.Web服务器应答</dt>
			<dd>客户机向服务器发出请求后，服务器会客户机回送应答。例如：HTTP/1.1 200 OK 应答的第一部分是协议的版本号和应答状态码</dd>
			<dt>5.Web服务器发送应答头信息</dt>
			<dd>正如客户端会随同请求发送关于自身的信息一样，服务器也会随同应答向用户发送关于它自己的数据及被请求的文档。</dd>
			<dt>6.Web服务器向浏览器发送数据</dt>
			<dd>Web服务器向浏览器发送头信息后，它会发送一个空白行来表示头信息的发送到此为结束，接着，它就以Content-Type应答头信息所描述的格式发送用户所请求的实际数据</dd>
			<dt>7.Web服务器关闭TCP连接</dt>
			<dd>一般情况下，一旦Web服务器向浏览器发送了请求数据，它就要关闭TCP连接，然后如果浏览器或者服务器在其头信息加入了这行代码<p>Connection:keep-alive</p>TCP连接在发送后将仍然保持打开状态，于是，浏览器可以继续通过相同的连接发送请求。保持连接节省了为每个请求建立新连接所需的时间，还节约了网络带宽。</dd>
		</dl>
	</div>
	<div>
		<h3>使用Promise而非回调函数的优缺点</h3>
		<div>
			<p>优点：可以将异步操作以同步操作的流程表达出来，避免了层层嵌套的回调函数。此外，Promise对象提供统一的接口，使得控制异步操作更加容易。</p>
			<p>缺点：无法取消Promise，一旦新建它就会立即执行，无法中途取消。其次，如果不设置回调函数，Promise内部抛出的错误，不会反应到外部。当处于Pending状态时，无法得知目前进展到哪一个阶段（刚刚开始还是即将完成）。</p>
		</div>
	</div>
	<div>
		<h3>浏览器输入url到整个页面显示出来经历的过程</h3>
		<div>
			<ol>
				<li>输入url地址后，浏览器查找域名的IP地址，这一步涉及到DNS的解析；</li>
				<li>当解析完成找到目标服务器，浏览器会向web服务器发送一个http请求；</li>
				<li>服务器接受并处理http请求；</li>
				<li>服务器构造并发送响应报文；</li>
				<li>服务器构造并发送响应报文；</li>
				<li>浏览器接收报文开始构建html页面</li>
				<li>浏览器发送静态资源请求，具体步骤略，服务器会把一些图片视频等资源返回给浏览器；</li>
				<li>浏览器发送异步请求；</li>
				<li>页面构建完成；</li>
			</ol>
		</div>
	</div>
	<div>
		<h3>什么是单页应用以及如何使其对搜索引擎友好?</h3>
		<div>
			<p>单页应用是指在浏览器中运行的应用，它们在使用期间不会重新加载页面。像所有的应用一样，它旨在帮助用户完成任务，比如“编写文档”或者“管理Web服务器”。可以认为单页应用是一种从Web服务器加载的富客户端。</p>
			<ul>
				<li>注重网站标题、关键词和描述的写法。标题上来说，要简单明确，包含主要关键词，一句话能概括全文;描述上来讲，一句话活一小段文字提炼出文章的精髓，内容比标题更加详细;关键词，用绝对的与内容相关的词语，多个关键词用逗号分开。</li>
				<li>在外链建设上，切忌内容单一，这样很容易造成网站的过度优化，而我们都知道，网站的过度优化对SEO而言是不利的。</li>
				<li>合理的运用网站标签可以让搜索引擎更好的理解网站的层次内容，比如h标签，strong标签等等。</li>
				<li>这里所说的符合国际标准指的是告诉搜索引擎我的网站符合W3C标准，对任何浏览器都是兼容的。</li>
				<li>有一些单页面为了展示很多产品特点，页面会拉的很长，不利于用户查看，用户体验并不好，如果在单页面网站上设置合理的锚点，用户只需要点击一下快速达到想要看到的内容区域。</li>
				<li>CSS和JS的优化，尽可能的使用外部导入，从而让网页代码更加简洁，能用CSS就尽量不用JS，毕竟JS对于搜索引擎而言并不友好。</li>
			</ul>
		</div>
	</div>
	<div>
		<h3>如何使用File API</h3>
		<div>
			<p>File对象的来源：</p>
			<ul>
				<li>input元素上选择文件后返回的 FileList 对象</li>
				<li>自由拖放操作生成的 DataTransfer 对象</li>
				<li> HTMLCanvasElement 上的 mozGetAsFile() API</li>
			</ul>
			<p>使用FileReader上传图片并实现预览：</p>
			<ul>
				<li>使用File作为参数构造FileReader对象</li>
				<li>调用readAsDataURL，将文件读取为data:的url</li>
				<li>在load事件中获取图片url并动态生成img到html中</li>
			</ul>
		</div>
	</div>
	<div>
		<h3>HTML5的离线储存工作原理，如何使用？</h3>
		<div>
			<p>在用户没有与因特网连接时，可以正常访问站点或应用，在用户与因特网连接时，更新用户机器上的缓存文件。</p>
  			<p>原理：HTML5的离线存储是基于一个新建的.appcache文件的缓存机制(不是存储技术)，通过这个文件上的解析清单离线存储资源，这些资源就会像cookie一样被存储了下来。之后当网络在处于离线状态下时，浏览器会通过被离线存储的数据进行页面展示。</p>
  			<p>在线的情况下，浏览器发现html头部有manifest属性，它会请求manifest文件，如果是第一次访问app，那么浏览器就会根据manifest文件的内容下载相应的资源并且进行离线存储。如果已经访问过app并且资源已经离线存储了，那么浏览器就会使用离线的资源加载页面，然后浏览器会对比新的manifest文件与旧的manifest文件，如果文件没有发生改变，就不做任何操作，如果文件改变了，那么就会重新下载文件中的资源并进行离线存储。
  			离线的情况下，浏览器就直接使用离线存储的资源。</p>
  			<p>如何使用：</p>
  			<ul>
  				<li>页面头部像下面一样加入一个manifest的属性；</li>
			  <li>在cache.manifest文件的编写离线存储的资源；</li>
			  <li>在离线状态时，操作window.applicationCache进行需求实现。</li>
  			</ul>
		</div>
	</div>
	<div>
		<h3>JavaScript有几种类型的值？它们的存储特点？</h3>
		<div>
			<p>栈：原始数据类型（Undefined，Null，Boolean，Number、String、Symbol）</p>
 			<p>堆：引用数据类型（对象、数组和函数）</p>
			<p>两种类型的区别是：存储位置不同；
 			原始数据类型直接存储在栈(stack)中的简单数据段，占据空间小、大小固定，属于被频繁使用数据，所以放入栈中存储；
 			引用数据类型存储在堆(heap)中的对象,占据空间大、大小不固定。如果存储在栈中，将会影响程序运行的性能；引用数据类型在栈中存储了指针，该指针指向堆中该实体的起始地址。当解释器寻找引用值时，会首先检索其在栈中的地址，取得地址后从堆中获得实体</p>
		</div>
	</div>
	<div>
		<h3>那些操作会造成内存泄漏？</h3>
		<div>
			<p>内存泄漏指任何对象在您不再拥有或需要它之后仍然存在。</p>
			<p>垃圾回收器定期扫描对象，并计算引用了每个对象的其他对象的数量。如果一个对象的引用数量为 0（没有其他对象引用过该对象），或对该对象的惟一引用是循环的，那么该对象的内存即可回收。</p>
			<p>引起内存泄露的原因：</p>
			<ul>
				<li>setTimeout 的第一个参数使用字符串而非函数的话，会引发内存泄漏。</li>
				<li>闭包</li>
				<li>控制台日志</li>
				<li>循环（在两个对象彼此引用且彼此保留时，就会产生一个循环）</li>
			</ul>
		</div>
	</div>
	<div>
		<h3>用过或实现过的polyfill方案</h3>
		<div>
			<ul>
				<li>html5shiv支持h5标签</li>
				<li>Placeholder</li>
				<li>babel-polyfill转码新的Javascript API</li>
			</ul>
		</div>
	</div>
</body>
</html>